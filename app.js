// Generated by CoffeeScript 1.4.0
(function() {
  var Creatable, app, config, download, express, render, rjs;

  express = require('express');

  rjs = require('rjs').installPrototypes();

  config = require('./config.js').config;

  render = require('./controller-helper.js').render;

  Creatable = require('Creatable');

  app = express();

  app.set('view engine', 'jade');

  app.set('views', __dirname + '/views');

  app.use(express.logger('dev'));

  app.use(express.bodyParser());

  app.use(express.cookieParser());

  app.use(express.session({
    secret: config.sessionSecret
  }));

  app.use(express["static"](__dirname + '/public'));

  download = function() {
    return [
      [
        [
          'p a.button', {
            href: 'https://raw.github.com/RaineOrShine/creatable/master/creatable.js'
          }, ["Download", ['strong', 'creatable.js']]
        ], [
          'p.de-em a', {
            href: 'https://github.com/RaineOrShine/creatable'
          }, 'View the Project on GitHub'
        ]
      ]
    ];
  };

  app.get('/', function(req, res) {
    var c;
    c = [
      'html', [
        [
          'head', [
            ['title', 'Creatable'], [
              'meta', {
                charset: 'UTF-8'
              }
            ], [
              'meta', {
                name: 'viewport',
                content: 'width=device-width, initial-scale=1.0'
              }
            ], [
              'link', {
                rel: 'stylesheet',
                href: 'components/bootstrap/css/bootstrap.min.css'
              }
            ], [
              'link', {
                rel: 'stylesheet',
                href: 'https://fonts.googleapis.com/css?family=Lato:300italic,700italic,300,700'
              }
            ], [
              'link', {
                rel: 'stylesheet',
                href: 'styles/main.css'
              }
            ]
          ]
        ], [
          'body', [
            [
              '.wrapper', [
                ['header.page-header', [['h1.page-title', 'Creatable'], ['p', 'Elegant HTML generation. No templates. Just Javascript.'], download()]], [
                  'section.content-section', [
                    [
                      '.above-the-fold', [
                        ['p.instruct', 'Creatable let\'s you build HTML in Javascript without templates.'], ['pre.prettyprint code.massive-demo', "['#content p a.small.button', { href: '/checkout' }, 'Checkout']"], [
                          '.center-divide .massive-symbol', {
                            html: true
                          }, '&rarr;'
                        ], ['pre.prettyprint code.language-javascript.massive-demo', '<div id="content">\n  <p>\n    <a class="small button" href="/checkout">Checkout</a>\n  </p>\n</div>']
                      ]
                    ], ['h2', 'Why?'], ['ul', [['li', 'Switching back-and-forth between Javascript and a templating language is a pain.'], ['li', 'Client-side templating is too heavy for simple markup.'], ['li', 'You can decompose and reuse markup with plain ol\' functions.'], ['li', 'The nested array structure reflects the natural structure of HTML for readability.'], ['li', ['Performing logic is easy and clean since it\'s Javascript ', ['em', 'all the way down'], '.']]]], ['h1', 'Getting Started'], ['p.instruct', 'Pass a simple array that represents an element to Creatable.create():'], ['pre.prettyprint code', 'Creatable.create(["a", { href: "http://google.com" }, "Google"])'], ['p.instruct', 'Creatable.create() returns a native DOM node. Append it to your document:'], ['pre.prettyprint code', 'var node = Creatable.create(["a", { href: "http://google.com" }, "Google"]);\ndocument.body.appendChild(node);'], ["p.instruct", 'Attributes are optional. Pass an object of attributes as the second item in the array.'], ['pre.prettyprint code', 'Creatable.create([\'input\', { type: \'input\', name: \'city\', value: \'Boulder\' }])'], ["p.instruct", 'You can easily nest child elements:'], ['pre.prettyprint code', 'Creatable.create([\'ul\', [\n  [\'li\', \'Item 1\'],\n  [\'li\', \'Item 2\'],\n  [\'li\', \'Item 3\']\n]])'], ["p.instruct", 'The unique use of nested arrays results in a very intuitive structure that reflects the appearance of HTML:'], ['pre.prettyprint code', 'var c = ["#content", [\n  ["h1.prominent", "Blogs"],\n  ["ul", [\n    ["li a", { href: "http://functionsource.com" }, "FunctionSource"],\n    ["li a", { href: "http://javascriptweblog.wordpress.com" }, "Javascript, Javascript"],\n    ["li a", { href: "http://ejohn.org/category/blog" }, "John Resig"]\n  ]]\n]];\ndocument.body.appendChild(Creatable.create(c));'], ['p', 'Result:'], ['pre.prettyprint code', '<div id="content">\n  <h1 class="prominent">Blogs</h1>\n  <ul>\n    <li><a href="http://functionsource.com">FunctionSource</a></li>\n    <li><a href="http://javascriptweblog.wordpress.com">Javascript, Javascript</a></li>\n    <li><a href="http://ejohn.org/category/blog">John Resig</a></li>\n  </ul>\n</div>'], ['h1', 'Documentation'], ['h2', 'Specify ids and classes like in CSS'], ['pre.prettyprint code', 'Creatable.create(["div#footer", [\n  ["p.fine-print", "Don\'t forget to read this!"]\n]])'], ['pre.prettyprint code', '<div id="footer">\n  <p class="fine-print">Don\'t forget to read this!</p>\n</div>'], ['h2', 'HTML is automatically escaped'], ['pre.prettyprint code', 'Creatable.create([\'p\', \'Something <strong>important</strong> to say.\'])'], ['pre.prettyprint code', '<p>Something &amp;lt;strong&amp;gt;important&amp;lt;/strong&amp;gt; to say.</p>'], ['p', 'You can unescape HTML by adding { html: true }'], ['pre.prettyprint code', 'Creatable.create([\'p\', { html: true }, \'Something <strong>important</strong> to say.\'])'], ['pre.prettyprint code', '<p>Something <strong>important</strong> to say.</p>'], ['h2', 'Document Fragments'], ['pre.prettyprint code', 'Creatable.create([[\n  ["p", "First paragraph!!!"],\n  ["p", "Second paragraph!!!"],\n  ["p", "Third paragraph I\'m bored"]\n]]);'], ['pre.prettyprint code', '<p>First paragraph!!!"</p>\n<p>Second paragraph!!!"</p>\n<p>Third paragraph I\'m bored</p>'], ['h2', 'Works great with underscore'], ['pre.prettyprint code', 'var links = [\n    { url: "http://functionsource.com", label: "FunctionSource" },\n    { url: "http://javascriptweblog.wordpress.com", label: "Javascript, Javascript" },\n    { url: "http://ejohn.org/category/blog", label: "John Resig" }\n];\n\nvar buildLinkItem = function(model) {\n    return ["li", [\n        ["a", { href: model.url }, model.label]\n    ]];\n};\n\nCreatable.create(["ul", _.map(links, buildLinkItem)])'], ['pre.prettyprint code', '<ul>\n    <li><a href="http://functionsource.com">FunctionSource</a></li>\n    <li><a href="http://javascriptweblog.wordpress.com">Javascript, Javascript</a></li>\n    <li><a href="http://ejohn.org/category/blog">John Resig</a></li>\n</ul>'], ['h2', 'Built-in support for jQuery elements'], ['pre.prettyprint code', 'Creatable.create(["#myModule", [\n    ["h1", "This is a header"],\n    "Some text.",\n    $("<div><p>Go, Go jQuery</p></div>")\n]])'], ['pre.prettyprint code', '<div id="myModule">\n    <h1>This is a header</h1>\n    Some text.\n    <div><p>Go, Go jQuery</p></div>\n</div>'], ['h2', 'Render a string of HTML instead of a DOM node'], ['pre.prettyprint code', 'var html = Creatable.createHtml([\'a#go.small.button\', \'test\']);\nconsole.log(html); //<a id="go" class="small button">test</a>'], ['h1', 'Unit Tests'], ['p', 'creatable has full unit test coverage using mocha.'], ['h1', 'Installation'], ['p', 'Client Side:'], ['pre.prettyprint code', '<script src="creatable.js"></script>'], ['p', 'Server Side:'], ['pre.prettyprint code', 'var Creatable = require(\'creatable.js\');']
                  ]
                ], ['section .center-divide', [download()]], ['hr'], [
                  'footer', [
                    [
                      'p', [
                        'This project is maintained by ', [
                          'a', {
                            href: 'https://github.com/RaineOrShine'
                          }, 'RaineOrShine'
                        ]
                      ]
                    ]
                  ]
                ]
              ]
            ], [
              'script', {
                type: 'text/javascript',
                src: 'https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'
              }
            ]
          ]
        ]
      ]
    ];
    return res.send('<!doctype html>' + Creatable.create(c).toString());
  });

  app.listen(process.env.PORT, function() {
    return console.log('Listening on port ' + process.env.PORT);
  });

  exports.app = app;

}).call(this);
